<template>
    <div class="wrapper">
        <div class="dot" ref="dot">
        </div>
        <div class="main-logo" ref="logo">
            <div class="logo-animation-wrapper">
                <div class="logo-animation">
                    <div class="anime-logo">
                        <div class="anime-logo-signs">
                            <div class="logo-letter letter-f">
                                <svg class="bounced" viewBox="0 0 1024 1024" width="200" height="240">
                                    <path
                                            d="M591.301586 1023.9934V556.936135h156.70883l23.510945-182.074513H591.301586V258.633595c0-52.698311 14.573882-88.611577 90.228696-88.611576l96.33415-0.039603V7.128529C761.204796 4.963568 704.018151 0 637.458811 0 498.472296 0 403.319634 84.836096 403.319634 240.601057v134.260565H246.135568v182.074513h157.184066v467.057265h187.981952z"
                                            p-id="2065" fill="#fafaf1" color="#fafaf1"></path>
                                </svg>
                            </div>
                            <div class="logo-letter i">
                                <svg class="bouncedI" viewBox="0 0 1024 1024" width="200" height="240">
                                    <path d="M435.29602729 281.88598236h153.42473721c10.37901654 0 19.36436902-3.7926958 26.9644529-11.38438504 7.57699695-7.58539243 11.37808822-16.57704172 11.37808824-26.96445374V128.48013477c0-10.38531253-3.80109128-19.37066501-11.39278052-26.97074973C608.08303403 93.92819077 599.08508792 90.125 588.70397271 90.125h-153.41004491c-10.3811152 0-19.37066501 3.80319077-26.96445292 11.38438504-7.58749109 7.59168923-11.38438504 16.5854372-11.38438504 26.97074973v115.05700881c0 10.38741202 3.79689395 19.37906131 11.38438504 26.96445374 7.5937879 7.59168923 16.5833377 11.38438504 26.96655241 11.38438505zM692.37239917 791.84934012c-7.58329294-7.59168923-16.57494223-11.39068186-26.96445291-11.39068186h-38.35513476V435.29182913c0-10.38321386-3.7926958-19.37066501-11.37808824-26.96025559-7.59798523-7.59168923-16.58963453-11.38858319-26.96445373-11.38858236H358.59835056c-10.38741202 0-19.37486316 3.79689395-26.96445292 11.38858237-7.5937879 7.58958975-11.38438504 16.57704172-11.38438504 26.96025558v76.70817087c0 10.3811152 3.7926958 19.37486316 11.38438504 26.96025559 7.58749109 7.60008472 16.57704172 11.39278052 26.96445292 11.39278052h38.35513477v230.10772082h-38.35513477c-10.38741202 0-19.37486316 3.79899262-26.96445292 11.39068185-7.5937879 7.58539243-11.38438504 16.57704172-11.38438504 26.96445375v76.70607136c0 10.38531253 3.7926958 19.37696182 11.38438504 26.97914521 7.58749109 7.57699695 16.57704172 11.37808822 26.96445292 11.37808904h306.8095957c10.38741202 0 19.37906131-3.80109128 26.96445291-11.37808904 7.58539243-7.60008472 11.37808822-16.59173401 11.37808822-26.97914521v-76.70607136c0-10.38951068-3.77170752-19.38115998-11.37808822-26.96655241z"
                                          p-id="1890" fill="#fafaf1">
                                    </path>
                                </svg>
                            </div>
                            <div class="logo-letter letter-r">
                                <svg class="bouncedR" viewBox="0 0 1024 1024" width="200" height="240" fill="none"
                                     fill-rule="evenodd">
                                    <path d="M184.1946875 921.7559375V116.2934375h341.85375c86.634375 0 147.5128125 7.02375 187.3171875 21.0721875s70.2440625 39.8053125 93.6590625 77.26875 35.1215625 79.6096875 35.1215625 126.43875c0 60.8784375-18.73125 110.0484375-53.85375 149.85375s-88.9753125 63.219375-159.219375 74.926875c35.1215625 21.073125 63.219375 42.14625 86.634375 67.903125s53.85375 67.90125 91.3171875 131.1215625c28.096875 44.4871875 49.17 77.26875 60.8775 98.3409375 7.0246875 14.049375 35.1225 32.780625 84.2925 58.5375H711.0246875L593.9515625 746.1453125c-42.14625-63.219375-70.2440625-103.0246875-86.634375-119.415s-32.780625-28.096875-49.1709375-32.7796875-44.488125-9.365625-81.9515625-9.365625h-32.7796875v337.17H184.19375z m163.903125-463.6096875h119.4140625c77.26875 0 126.4396875-2.3409375 145.171875-9.365625s35.1215625-18.73125 44.4871875-35.1225 16.3903125-35.1215625 16.3903125-60.8775c0-28.096875-7.0246875-49.1709375-21.073125-65.56125s-35.1225-28.096875-60.8784375-30.43875c-14.0484375-2.341875-51.511875-2.341875-119.415-2.341875H345.7559375v203.7075z"
                                          p-id="2240" fill="#fafaf1">
                                    </path>
                                </svg>
                            </div>
                            <div class="logo-letter letter-m">
                                <svg class="bouncedM" viewBox="0 0 1024 1024" width="200" height="240">
                                    <path d="M687.20223618 184.37585068L512 359.573452l-175.20223618-175.19760132H116.4921875v655.24829864h233.88261795V528.70866013l145.20544052 145.20389556 16.41820908 16.35486604 0.18693924-0.1884842 0.03398894 0.032444 161.40581132-161.40581131V839.62260437H907.5078125V184.37585068H687.20223618zM861.15924072 793.27557754h-141.1854744V416.81084824L511.99845505 624.78615952 304.02623367 416.81393814v376.4616394H162.84075928V230.72442246h154.75942612L512 425.1196022 706.3998146 230.72442246H861.15924072v562.55115508z"
                                          p-id="1396" fill="#fafaf1"></path>
                                </svg>
                            </div>
                            <div class="bounce">
                                <svg viewBox="0 0 1000 260" width="1000" height="260" fill="none">
                                    <path d="M630,240 C630,111.154418 608.971354,40 530.160048,40 C451.348741,40 430,127.460266 430,210"/>
                                </svg>
                                <div class="dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    import anime from 'animejs/lib/anime.es'

    export default {
        name: "Main",
        mounted() {
            this.addToLogo(this.$refs.logo)
            this.addToDot(this.$refs.dot)
        },
        methods: {
            addToLogo() {
                let target = this.init()
                    .add({
                        targets: '.bounced',
                        transformOrigin: ['50% 100% 0px', '50% 100% 0px'],
                        translateY: [
                            {
                                value: [150, -160],
                                duration: 190,
                                endDelay: 20,
                                easing: 'cubicBezier(0.225, 1, 0.915, 0.980)'
                            },
                            {value: 4, duration: 120, easing: 'easeInQuad'},
                            {value: 0, duration: 120, easing: 'easeOutQuad'}
                        ],
                        scaleX: [
                            {value: [.25, .85], duration: 190, easing: 'easeOutQuad'},
                            {value: 1.08, duration: 120, delay: 85, easing: 'easeInOutSine'},
                            {value: 1, duration: 260, delay: 25, easing: 'easeOutQuad'}
                        ],
                        scaleY: [
                            {value: [.3, .8], duration: 120, easing: 'easeOutSine'},
                            {value: .35, duration: 120, delay: 180, easing: 'easeInOutSine'},
                            {value: .57, duration: 180, delay: 25, easing: 'easeOutQuad'},
                            {value: .5, duration: 190, delay: 15, easing: 'easeOutQuad'}
                        ],
                        delay: anime.stagger(80)
                    }, 1000)
                    .add({
                        targets: '.bouncedI',
                        transformOrigin: ['50% 100% 0px', '50% 100% 0px'],
                        translateY: [
                            {
                                value: [150, -160],
                                duration: 190,
                                endDelay: 20,
                                easing: 'cubicBezier(0.225, 1, 0.915, 0.980)'
                            },
                            {value: 4, duration: 120, easing: 'easeInQuad'},
                            {value: 12, duration: 120, easing: 'easeOutQuad'}
                        ],
                        scaleX: [
                            {value: [.25, .85], duration: 190, easing: 'easeOutQuad'},
                            {value: 1.08, duration: 120, delay: 85, easing: 'easeInOutSine'},
                            {value: 1, duration: 260, delay: 25, easing: 'easeOutQuad'}
                        ],
                        scaleY: [
                            {value: [.3, .8], duration: 120, easing: 'easeOutSine'},
                            {value: .35, duration: 120, delay: 180, easing: 'easeInOutSine'},
                            {value: .57, duration: 180, delay: 25, easing: 'easeOutQuad'},
                            {value: .6, duration: 190, delay: 15, easing: 'easeOutQuad'}
                        ],
                        delay: anime.stagger(80)
                    }, 1000)
                    .add({
                        targets: '.bouncedM',
                        transformOrigin: ['50% 100% 0px', '50% 100% 0px'],
                        translateY: [
                            {
                                value: [150, -160],
                                duration: 190,
                                endDelay: 20,
                                easing: 'cubicBezier(0.225, 1, 0.915, 0.980)'
                            },
                            {value: 4, duration: 120, easing: 'easeInQuad'},
                            {value: 32, duration: 120, easing: 'easeOutQuad'}
                        ],
                        scaleX: [
                            {value: [.25, .85], duration: 190, easing: 'easeOutQuad'},
                            {value: 1.08, duration: 120, delay: 85, easing: 'easeInOutSine'},
                            {value: 1, duration: 260, delay: 25, easing: 'easeOutQuad'}
                        ],
                        scaleY: [
                            {value: [.3, .8], duration: 120, easing: 'easeOutSine'},
                            {value: .35, duration: 120, delay: 180, easing: 'easeInOutSine'},
                            {value: .57, duration: 180, delay: 25, easing: 'easeOutQuad'},
                            {value: .75, duration: 190, delay: 15, easing: 'easeOutQuad'}
                        ],
                        delay: anime.stagger(80)
                    }, 1000)
                    .add({
                        targets: '.bouncedR',
                        transformOrigin: ['50% 100% 0px', '50% 100% 0px'],
                        translateY: [
                            {
                                value: [150, -160],
                                duration: 190,
                                endDelay: 20,
                                easing: 'cubicBezier(0.225, 1, 0.915, 0.980)'
                            },
                            {value: 7, duration: 120, easing: 'easeInQuad'},
                            {value: 17, duration: 120, easing: 'easeOutQuad'}
                        ],
                        scaleX: [
                            {value: [.25, .85], duration: 190, easing: 'easeOutQuad'},
                            {value: 1.08, duration: 120, delay: 85, easing: 'easeInOutSine'},
                            {value: 1, duration: 260, delay: 25, easing: 'easeOutQuad'}
                        ],
                        scaleY: [
                            {value: [.3, .8], duration: 120, easing: 'easeOutSine'},
                            {value: .25, duration: 120, delay: 180, easing: 'easeInOutSine'},
                            {value: .50, duration: 180, delay: 25, easing: 'easeOutQuad'},
                            {value: .65, duration: 190, delay: 15, easing: 'easeOutQuad'}
                        ],
                        delay: anime.stagger(80)
                    }, 1000)
                    .add({
                        targets: '.letter-r .line',
                        easing: 'easeOutElastic(1, .8)',
                        duration: 600,
                        d: function (el) {
                            return el.dataset.d2
                        },
                    }, '-=140')
                    .add({
                        targets: ['.letter-f', '.i', '.letter-i', '.letter-m'],
                        translateX: 0,
                        easing: 'easeOutElastic(1, .6)',
                        duration: 800,
                        delay: anime.stagger(40, {from: 2.5}),
                        change: function (a) {
                            a.animatables[2].target.removeAttribute('stroke-dasharray');
                        }
                    }, '-=600')
                    .add({
                        targets: '.letter-r .line',
                        d: function (el) {
                            return el.dataset.d3
                        },
                        easing: 'spring(.2, 200, 3, 60)',
                    }, '-=680')
                    .add({
                        targets: '.letter-i .line',
                        transformOrigin: ['50% 100% 0', '50% 100% 0'],
                        d: function (el) {
                            return el.dataset.d2
                        },
                        backgroundColor: '#FFF',
                        fill:'#ff5134',
                        easing: 'cubicBezier(0.400, 0.530, 0.070, 1)',
                        duration: 80
                    }, '-=670')
                target.play()
            },
            addToDot(){
                let target = this.init()
                target.add({
                        targets: '.dot',
                        transformOrigin: ['50% 100% 0px', '50% 100% 0px'],
                        translateY: [
                            {
                                value: [150, -160],
                                duration: 190,
                                endDelay: 20,
                                easing: 'cubicBezier(0.225, 1, 0.915, 0.980)'
                            },
                            {value: 4, duration: 120, easing: 'easeInQuad'},
                            {value: 0, duration: 120, easing: 'easeOutQuad'}
                        ],
                        scaleX: [
                            {value: [.25, .85], duration: 190, easing: 'easeOutQuad'},
                            {value: 1.08, duration: 120, delay: 85, easing: 'easeInOutSine'},
                            {value: 1, duration: 260, delay: 25, easing: 'easeOutQuad'}
                        ],
                        scaleY: [
                            {value: [.3, .8], duration: 120, easing: 'easeOutSine'},
                            {value: .35, duration: 120, delay: 180, easing: 'easeInOutSine'},
                            {value: .57, duration: 180, delay: 25, easing: 'easeOutQuad'},
                            {value: .5, duration: 190, delay: 15, easing: 'easeOutQuad'}
                        ],
                        delay: anime.stagger(80)
                    }, 1000)
                target.play()
            },
            init() {
                let logoAnimationEl = this.$refs.logo
                this.animeSet(logoAnimationEl, 0)
                return anime.timeline({
                    autoplay: false,
                    easing: 'easeOutSine'
                })
            },
            animeSet(el) {
                anime.set(el, {scale: 1})
            }
        }

    }
</script>

<style scoped>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        width: 100%;
        height: 100vh;
    }

    .dot {
        width: 20px;
        height: 20px;
        background-color: white;
    }

    .wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        height: calc(100vh - 300px);
    }

    .main-logo {
        position: relative;
        display: inline-flex;
        align-items: center;
        flex-direction: column;
        width: 60vw;
    }

    .logo-animation-wrapper {
        position: relative;
        width: 100%;
        padding-bottom: 12%;
    }

    .logo-animation {
        pointer-events: none;
        overflow: visible;
        display: flex;
        flex-shrink: 0;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: absolute;
        top: 50%;
        left: 50%;
        width: 1000px;
        height: 240px;
        margin: -120px 0 0 -500px;
        transform: scale(.633333);
    }

    .anime-logo {
        overflow: visible;
        position: relative;
        display: flex;
        flex-direction: column;
        width: 1000px;
        height: 120px;
    }

    .anime-logo-signs {
        overflow: visible;
        display: flex;
        align-items: flex-end;
        position: relative;
        width: 100%;
        height: 512px;
        margin-top: -352px;
    }

    .logo-letter {
        display: flex;
        align-items: flex-end;
        overflow: hidden;
        height: 100%;
    }

    .bounced {
        transform-origin: 50% 100% 0px;
        transform: translateY(200px) scaleX(.55) scaleY(.8);
    }

    .logo-animation .bounce {
        overflow: visible;
        position: absolute;
        left: 0;
        bottom: 70px;
        /*stroke: red;*/
    }

    .logo-animation .dot {
        opacity: 0.001;
        position: absolute;
        z-index: 10;
        top: 0;
        left: 0;
        width: 40px;
        height: 40px;
        margin: -20px 0 0 -20px;
        background-color: currentColor;
        transform: translate3d(0, 0, 0);
    }

    .logo-animation .logo-letter svg {
        overflow: visible;
        fill: none;
        fill-rule: evenodd;
    }

    .logo-animation .line {
        fill: none;
        fill-rule: evenodd;
        stroke-linecap: square;
        stroke-width: 40;
        stroke: currentColor;
    }

    .logo-animation .fill {
        opacity: .001;
        stroke: currentColor;
        stroke-width: 40px;
    }

    .logo-text {
        opacity: .001;
        margin-top: .25em;
        font-weight: 400;
        font-size: 11px;
        line-height: 1;
        letter-spacing: .125em;
        text-align: justify;
        word-break: keep-all;
    }

    .logo-text:after {
        content: "";
        display: inline-block;
        width: 100%;
        height: 0;
        font-size: 0;
        line-height: 0;
    }
</style>
